import {Router} from 'express'
import {createCustomer,updateCustomer,deleteCustomer,exportData, getCustomers} from "../controllers/customer.controller.js";
import { authorized } from '../middlewares/validateToken.js';
import { validateSchema } from '../middlewares/validator.middleware.js';
import { newCustomerSchema, getCustomersSchema, pdfGeneratorSchema } from '../schemas/customer.schema.js';


const router = Router()

router.post('/api/customer/create', validateSchema(newCustomerSchema), authorized, createCustomer);
router.post('/api/customer/:id', authorized, updateCustomer);
router.post('/api/customer/delete/:id', authorized, deleteCustomer);
router.get('/api/customer/export',  validateSchema(pdfGeneratorSchema), authorized, exportData);
router.get('/api/customer', validateSchema(getCustomersSchema), authorized, getCustomers);

export default router