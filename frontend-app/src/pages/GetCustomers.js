import { useEffect, useState } from "react"
import { useCutomer } from "../context/CustomerContext"
import CustomerTable from '../components/CustomersTab'

function GetCustomers()  {
    const {getCustomersReq, customer} = useCutomer()
    const [isLoading, setIsLoading] = useState(true);

    useEffect(() => {
        getCustomersReq()
        .then(() => setIsLoading(false))
          .catch((error) => {
            setIsLoading(false);
            console.error('Error fetching customer data:', error);
          });
    }, [])

    if (isLoading) return <h1>Loading...</h1>;

    if (!customer || customer.length === 0 ) return (<h1>There'is no loans requests</h1>)

    return (
        <div>
          <CustomerTable customers={customer} />
        </div>
      );

}

export default GetCustomers