import { useEffect, useState } from "react"
import { useAdmin } from "../context/AdminContext"
import UserTable from '../components/UsersTab'

function GetUsers()  {
    const {getUsersReq, users} = useAdmin();
    const [isLoading, setIsLoading] = useState(true);

    useEffect(() => {
        getUsersReq()
        .then(() => setIsLoading(false))
          .catch((error) => {
            setIsLoading(false);
            console.error('Error fetching users data:', error);
          });
    }, [])

    if (isLoading) 
    {
      return <h1>Loading...</h1>
    };

    if (!users || users.length === 0 ) return (<h1>There'is no users</h1>)

    return (<div>
        
          <UserTable users={users} />
        
    </div>)

}

export default GetUsers