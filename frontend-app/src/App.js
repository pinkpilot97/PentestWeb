import React from 'react';
import Header from './components/Header';
import MainContent from './components/MainContent';
import Footer from './components/Footer';
import About from './components/About';
import Login from './components/Login';
import ProtectedRoutes from './components/ProtectedRoutes';
import { BrowserRouter as Router,Routes, Route, Link } from 'react-router-dom';
import './styles.css';
import ReactDOM from "react-dom/client";
import {AuthProvider} from "./context/AuthContext";
import Loans from './pages/Loans';
import Profile from './pages/Profile';
import Users from './pages/Users';
import LoansExport from './pages/LoansExport';
import { CustomerProvider } from './context/CustomerContext';
import GetCustomers from './pages/GetCustomers';
import { AdminProvider } from './context/AdminContext';
import GetUsers from './pages/GetUsers';
import PasswordReset from './pages/PasswordReset';
import PasswordResetToken from './pages/PasswordResetToken';

const App = () => {
  return (/*
    <Router>
    <div className="App">
      <Header />
      <MainContent/>
      <Routes>
          <Route exact path="/login" element={<Login/>}/>
            
      </Routes>
      <About/>
      <Footer/>
    </div>
    </Router>*/
    <AuthProvider>
      <CustomerProvider>
          <AdminProvider>
              <Router>
              <div className="App">
                  <ul className="App-header">
                  <Header />
                  </ul>
              <Routes>
                      <Route exact path='/home' element={[<MainContent />,<About/>]}></Route>
                      <Route exact path='/login' element={< Login />}></Route>
                      <Route exact path='/password/reset' element={<PasswordReset/>}></Route>
                      <Route exact path='/password/reset/:id/:token' element={<PasswordResetToken/>}></Route>



                      <Route element={<ProtectedRoutes/>}>
                      <Route exact path='/loans' element={< Loans />}></Route>
                      <Route exact path='/loans/:id' element={< Loans />}></Route>
                      <Route exact path='/loans/customers' element={< GetCustomers />}></Route>
                      <Route exact path='/loan/export' element={< LoansExport />}></Route>
                      <Route exact path='/profile/:id' key={window.location.pathname} element={< Profile />}></Route>
                      <Route exact path='/admin/users' element={< Users />}></Route>
                      <Route exact path='/admin/users/:id' element={< GetUsers />}></Route>
                      <Route exact path='/admin' element={< GetUsers />}></Route>
                      </Route>
              </Routes>

              <Footer/>
              </div>
              </Router>
          </AdminProvider>
      </CustomerProvider>
    </AuthProvider>
  );
};

export default App;